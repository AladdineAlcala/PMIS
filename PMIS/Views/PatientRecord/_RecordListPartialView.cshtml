@using PagedList
@using PagedList.Mvc
@using PMIS.Model
@model PagedList<MedicalRecord>

@{
    if (Model.Count > 0)
    {

        <input type="hidden" value="@ViewBag.appointNo" id="appointmentNo" />

        <h4 style="text-align:center">Recent Activity</h4>

        foreach (var item in Model)
        {
            <div class="post clearfix" data-postId="@item.RecordNo">

                <div class="user-block">

                    <span class="username text-primary">
                        @item.ActivityName
                    </span>
                    <span class="description">@item.RecordDate.Value.ToString("D")</span>
                </div>
                <!-- /.user-block -->

                <div class="medical-history">
                    @(new HtmlString(item.RecordDetails))
                </div>
                <div class="mailbox-controls text-left">
                    <a href="#" class="link-chart text-sm mr-2" id="viewchart"><i class="fas fa-binoculars mr-1"></i> View</a>

                    <a href="#" class="link-chart text-sm mr-2" id="modifychart"><i class="fas fa-edit mr-1"></i> Edit</a>

                    @*<a href="#" class="link-chart text-sm" id="removechart"><i class="far fa-trash mr-1"></i> Remove</a>*@
                </div>
            </div>
            <!-- END POST -->
        }

        <span>Page</span>
        @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
        <span>of</span>
        @Model.PageCount
        @Html.PagedListPager(Model, page => Url.Action("MedicalHistory", new { page, id = ViewBag.patId, phyId = ViewBag.phyId }), PagedListRenderOptions.EnableUnobtrusiveAjaxReplacing(new AjaxOptions() { HttpMethod = "GET", UpdateTargetId = "medicalrecord" }))
    }
    else
    {
        <div class="alert alert-info alert-dismissible">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <h5><i class="icon fas fa-info"></i> No Record Found </h5>

        </div>
    }
}
